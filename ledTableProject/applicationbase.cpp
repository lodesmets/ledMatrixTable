#include "applicationbase.h"
#include <iostream>

applicationBase::applicationBase(QObject *parent, ws2811_led_t *ledMatrix) : QObject(parent), matrix(ledMatrix)
{
    fps=30;
    createSmallFont();
    createBigFont();

}

applicationBase::~applicationBase()
{

}

void applicationBase::start()
{
    initApp();
    timer = new QTimer(this);
    connect(timer, SIGNAL(timeout()), this, SLOT(tick()));
    timer->start(1000/fps);

}

void applicationBase::stop()
{
    timer->stop();
    disconnect(timer, SIGNAL(timeout()), this, SLOT(tick()));
    delete timer;
    closeApp();
}

void applicationBase::createSmallFont()
{
    fontSmall.insert('A',{{0,1,1,0,0},{1,0,0,1,0},{1,0,0,1,0},{1,1,1,1,0},{1,0,0,1,0}});
    fontSmall.insert('B',{{1,1,1,0,0},{1,0,0,1,0},{1,1,1,0,0},{1,0,0,1,0},{1,1,1,0,0}});
    fontSmall.insert('C',{{0,1,1,0,0},{1,0,0,1,0},{1,0,0,0,0},{1,0,0,1,0},{0,1,1,0,0}});
    fontSmall.insert('D',{{1,1,1,0,0},{1,0,0,1,0},{1,0,0,1,0},{1,0,0,1,0},{1,1,1,0,0}});
    fontSmall.insert('E',{{1,1,1,1,0},{1,0,0,0,0},{1,1,1,0,0},{1,0,0,0,0},{1,1,1,1,0}});
    fontSmall.insert('F',{{1,1,1,1,0},{1,0,0,0,0},{1,1,1,0,0},{1,0,0,0,0},{1,0,0,0,0}});
    fontSmall.insert('G',{{0,1,1,0,0},{1,0,0,0,0},{1,0,1,1,0},{1,0,0,1,0},{0,1,1,0,0}});
    fontSmall.insert('H',{{1,0,0,1,0},{1,0,0,1,0},{1,1,1,1,0},{1,0,0,1,0},{1,0,0,1,0}});
    fontSmall.insert('I',{{1,1,1,0},{0,1,0,0},{0,1,0,0},{0,1,0,0},{1,1,1,0}});
    fontSmall.insert('J',{{0,0,1,1,0},{0,0,0,1,0},{0,0,0,1,0},{1,0,0,1,0},{0,1,1,0,0}});
    fontSmall.insert('K',{{1,0,0,1,0},{1,0,1,0,0},{1,1,0,0,0},{1,0,1,0,0},{1,0,0,1,0}});
    fontSmall.insert('L',{{1,0,0,0,0},{1,0,0,0,0},{1,0,0,0,0},{1,0,0,0,0},{1,1,1,1,0}});
    fontSmall.insert('M',{{1,0,0,0,1,0},{1,1,0,1,1,0},{1,0,1,0,1,0},{1,0,0,0,1,0},{1,0,0,0,1,0}});
    fontSmall.insert('N',{{1,0,0,1,0},{1,1,0,1,0},{1,0,1,1,0},{1,0,0,1,0},{1,0,0,1,0}});
    fontSmall.insert('O',{{0,1,1,0,0},{1,0,0,1,0},{1,0,0,1,0},{1,0,0,1,0},{0,1,1,0,0}});
    fontSmall.insert('P',{{1,1,1,0,0},{1,0,0,1,0},{1,1,1,0,0},{1,0,0,0,0},{1,0,0,0,0}});
    fontSmall.insert('Q',{{0,1,1,0,0},{1,0,0,1,0},{1,0,0,1,0},{1,0,0,1,0},{0,1,1,1,1}});
    fontSmall.insert('R',{{1,1,1,0,0},{1,0,0,1,0},{1,1,1,0,0},{1,0,0,1,0},{1,0,0,1,0}});
    fontSmall.insert('S',{{0,1,1,1,0},{1,0,0,0,0},{0,1,1,0,0},{0,0,0,1,0},{1,1,1,0,0}});
    fontSmall.insert('T',{{1,1,1,1,1,0},{0,0,1,0,0,0},{0,0,1,0,0,0},{0,0,1,0,0,0},{0,0,1,0,0,0}});
    fontSmall.insert('U',{{1,0,0,1,0},{1,0,0,1,0},{1,0,0,1,0},{1,0,0,1,0},{0,1,1,0,0}});
    fontSmall.insert('V',{{1,0,0,1,0},{1,0,0,1,0},{1,0,0,1,0},{1,0,1,0,0},{0,1,0,0,0}});
    fontSmall.insert('W',{{1,0,0,0,1,0},{1,0,0,0,1,0},{1,0,1,0,1,0},{1,0,1,0,1,0},{0,1,0,1,0,0}});
    fontSmall.insert('X',{{1,0,0,1,0},{1,1,0,1,0},{0,1,1,0,0},{1,0,1,1,0},{1,0,0,1,0}});
    fontSmall.insert('Y',{{1,0,0,1,0},{1,0,0,1,0},{1,1,1,0,0},{0,0,1,0,0},{0,1,0,0,0}});
    fontSmall.insert('Z',{{1,1,1,1,0},{0,0,0,1,0},{0,1,1,0,0},{1,0,0,0,0},{1,1,1,1,0}});

    fontSmall.insert(' ',{{0,0,0,0},{0,0,0,0},{0,0,0,0},{0,0,0,0},{0,0,0,0}});

    fontSmall.insert('!',{{1,0},{1,0},{1,0},{0,0},{1,0}});
    fontSmall.insert('"',{{1,0,1,0},{0,0,0,0},{0,0,0,0},{0,0,0,0},{0,0,0,0}});
    fontSmall.insert('#',{{0,1,0,1,0,0},{1,1,1,1,1,0},{0,1,0,1,0,0},{1,1,1,1,1,0},{0,1,0,1,0,0}});
    fontSmall.insert('\'',{{1,0},{0,0},{0,0},{0,0},{0,0}});
    fontSmall.insert('(',{{0,1,0},{1,0,0},{1,0,0},{1,0,0},{0,1,0}});
    fontSmall.insert(')',{{1,0,0},{0,1,0},{0,1,0},{0,1,0},{1,0,0}});
    fontSmall.insert('*',{{0,0,0,0},{1,0,1,0},{0,1,0,0},{1,0,1,0},{0,0,0,0}});
    fontSmall.insert('+',{{0,0,0,0},{0,1,0,0},{1,1,1,0},{0,1,0,0},{0,0,0,0}});
    fontSmall.insert(',',{{0,0},{0,0},{0,0},{1,0},{1,0}});
    fontSmall.insert('.',{{0,0},{0,0},{0,0},{0,0},{1,0}});
    fontSmall.insert('/',{{0,0,1,0},{0,1,0,0},{0,1,0,0},{0,1,0,0},{1,0,0,0}});
    fontSmall.insert('\\',{{1,0,0,0},{0,1,0,0},{0,1,0,0},{0,1,0,0},{0,0,1,0}});
    fontSmall.insert(':',{{0,0},{1,0},{0,0},{1,0},{0,0}});
    fontSmall.insert(';',{{0,0},{1,0},{0,0},{1,0},{1,0}});
    fontSmall.insert('<',{{0,0,0},{0,1,0},{1,0,0},{0,1,0},{0,0,0}});
    fontSmall.insert('>',{{0,0,0},{1,0,0},{0,1,0},{1,0,0},{0,0,0}});
    fontSmall.insert('?',{{1,1,1,0},{0,0,1,0},{0,1,0,0},{0,0,0,0},{0,1,0,0}});
    fontSmall.insert('@',{{0,1,1,1,0,0},{1,0,0,0,1,0},{1,0,1,0,0,0},{1,1,0,1,0,0},{0,1,1,0,1,0}});
    fontSmall.insert('=',{{0,0,0},{1,1,0},{0,0,0},{1,1,0},{0,0,0}});
    fontSmall.insert('|',{{1,0},{1,0},{1,0},{1,0},{1,0}});

    fontSmall.insert('0',{{0,1,1,0,0},{1,0,0,1,0},{1,1,0,1,0},{1,0,1,1,0},{0,1,1,0,0}});
    fontSmall.insert('1',{{0,0,1,0},{0,1,1,0},{1,0,1,0},{0,0,1,0},{0,0,1,0}});
    fontSmall.insert('2',{{1,1,1,0,0},{0,0,0,1,0},{0,0,1,0,0},{0,1,0,0,0},{1,1,1,1,0}});
    fontSmall.insert('3',{{1,1,1,0,0},{0,0,0,1,0},{0,1,1,0,0},{0,0,0,1,0},{1,1,1,0,0}});
    fontSmall.insert('4',{{0,0,1,1,0},{0,1,0,1,0},{1,0,0,1,0},{0,1,1,1,0},{0,0,0,1,0}});
    fontSmall.insert('5',{{0,1,1,1,0},{1,0,0,0,0},{1,1,1,0,0},{0,0,0,1,0},{1,1,1,0,0}});
    fontSmall.insert('6',{{0,1,1,0,0},{1,0,0,0,0},{1,1,1,0,0},{1,0,0,1,0},{0,1,1,0,0}});
    fontSmall.insert('7',{{1,1,1,1,0},{0,0,0,1,0},{0,0,1,0,0},{0,1,0,0,0},{0,1,0,0,0}});
    fontSmall.insert('8',{{0,1,1,0,0},{1,0,0,1,0},{0,1,1,0,0},{1,0,0,1,0},{0,1,1,0,0}});
    fontSmall.insert('9',{{0,1,1,0,0},{1,0,0,1,0},{0,1,1,1,0},{0,0,0,1,0},{0,1,1,0,0}});
}

void applicationBase::createBigFont()
{
    fontBig.insert('A',{{0,1,1,1,0,0},{1,0,0,0,1,0},{1,0,0,0,1,0},{1,1,1,1,1,0},{1,0,0,0,1,0},{1,0,0,0,1,0},{1,0,0,0,1,0}});
    fontBig.insert('B',{{1,1,1,1,0,0},{1,0,0,0,1,0},{1,0,0,0,1,0},{1,1,1,1,0,0},{1,0,0,0,1,0},{1,0,0,0,1,0},{1,1,1,1,0,0}});
    fontBig.insert('C',{{0,1,1,1,0,0},{1,0,0,0,1,0},{1,0,0,0,0,0},{1,0,0,0,0,0},{1,0,0,0,0,0},{1,0,0,0,1,0},{0,1,1,1,0,0}});
    fontBig.insert('D',{{1,1,1,1,0,0},{1,0,0,0,1,0},{1,0,0,0,1,0},{1,0,0,0,1,0},{1,0,0,0,1,0},{1,0,0,0,1,0},{1,1,1,1,0,0}});
    fontBig.insert('E',{{1,1,1,1,1,0},{1,0,0,0,0,0},{1,0,0,0,0,0},{1,1,1,1,0,0},{1,0,0,0,0,0},{1,0,0,0,0,0},{1,1,1,1,1,0}});
    fontBig.insert('F',{{1,1,1,1,1,0},{1,0,0,0,0,0},{1,0,0,0,0,0},{1,0,0,0,0,0},{1,1,1,1,0,0},{1,0,0,0,0,0},{1,0,0,0,0,0}});
    fontBig.insert('G',{{0,1,1,1,0,0},{1,0,0,0,1,0},{1,0,0,0,0,0},{1,0,1,1,1,0},{1,0,0,0,1,0},{1,0,0,0,1,0},{0,1,1,1,1,0}});
    fontBig.insert('H',{{1,0,0,0,1,0},{1,0,0,0,1,0},{1,0,0,0,1,0},{1,1,1,1,1,0},{1,0,0,0,1,0},{1,0,0,0,1,0},{1,0,0,0,1,0}});
    fontBig.insert('I',{{0,0,1,0,0,0},{0,0,1,0,0,0},{0,0,1,0,0,0},{0,0,1,0,0,0},{0,0,1,0,0,0},{0,0,1,0,0,0},{0,1,1,1,0,0}});
    fontBig.insert('J',{{0,1,1,1,1,0},{0,0,0,0,1,0},{0,0,0,0,1,0},{0,0,0,0,1,0},{0,0,0,0,1,0},{1,0,0,0,1,0},{0,1,1,1,0,0}});
    fontBig.insert('K',{{1,0,0,0,1,0},{1,0,0,1,0,0},{1,0,1,0,0,0},{1,1,0,0,0,0},{1,0,1,0,0,0},{1,0,0,1,0,0},{1,0,0,0,1,0}});
    fontBig.insert('L',{{1,0,0,0,0,0},{1,0,0,0,0,0},{1,0,0,0,0,0},{1,0,0,0,0,0},{1,0,0,0,0,0},{1,0,0,0,0,0},{1,1,1,1,1,0}});
    fontBig.insert('M',{{1,1,0,1,1,0},{1,0,1,0,1,0},{1,0,1,0,1,0},{1,0,1,0,1,0},{1,0,0,0,1,0},{1,0,0,0,1,0},{1,0,0,0,1,0}});
    fontBig.insert('N',{{1,0,0,0,1,0},{1,0,0,0,1,0},{1,1,0,0,1,0},{1,0,1,0,1,0},{1,0,0,1,1,0},{1,0,0,0,1,0},{1,0,0,0,1,0}});
    fontBig.insert('O',{{0,1,1,1,0,0},{1,0,0,0,1,0},{1,0,0,0,1,0},{1,0,0,0,1,0},{1,0,0,0,1,0},{1,0,0,0,1,0},{0,1,1,1,0,0}});
    fontBig.insert('P',{{1,1,1,1,0,0},{1,0,0,0,1,0},{1,0,0,0,1,0},{1,1,1,1,0,0},{1,0,0,0,0,0},{1,0,0,0,0,0},{1,0,0,0,0,0}});
    fontBig.insert('Q',{{0,1,1,1,0,0},{1,0,0,0,1,0},{1,0,0,0,1,0},{1,0,0,0,1,0},{1,0,1,0,1,0},{1,0,0,1,0,0},{0,1,1,0,1,0}});
    fontBig.insert('R',{{1,1,1,1,0,0},{1,0,0,0,1,0},{1,0,0,0,1,0},{1,1,1,1,0,0},{1,0,1,0,0,0},{1,0,0,1,0,0},{1,0,0,0,1,0}});
    fontBig.insert('S',{{0,1,1,1,0,0},{1,0,0,0,1,0},{1,0,0,0,0,0},{0,1,1,1,0,0},{0,0,0,0,1,0},{1,0,0,0,1,0},{0,1,1,1,0,0}});
    fontBig.insert('T',{{1,1,1,1,1,0},{0,0,1,0,0,0},{0,0,1,0,0,0},{0,0,1,0,0,0},{0,0,1,0,0,0},{0,0,1,0,0,0},{0,0,1,0,0,0}});
    fontBig.insert('U',{{1,0,0,0,1,0},{1,0,0,0,1,0},{1,0,0,0,1,0},{1,0,0,0,1,0},{1,0,0,0,1,0},{1,0,0,0,1,0},{0,1,1,1,0,0}});
    fontBig.insert('V',{{1,0,0,0,1,0},{1,0,0,0,1,0},{1,0,0,0,1,0},{1,0,0,0,1,0},{1,0,0,0,1,0},{0,1,0,1,0,0},{0,0,1,0,0,0}});
    fontBig.insert('F',{{1,0,0,0,1,0},{1,0,0,0,1,0},{1,0,1,0,1,0},{1,0,1,0,1,0},{1,0,1,0,1,0},{1,0,1,0,1,0},{0,1,0,1,0,0}});
    fontBig.insert('X',{{1,0,0,0,1,0},{0,1,0,1,0,0},{0,0,1,0,0,0},{0,0,1,0,0,0},{0,0,1,0,0,0},{0,1,0,1,0,0},{1,0,0,0,1,0}});
    fontBig.insert('Y',{{1,0,0,0,1,0},{1,0,0,0,1,0},{1,0,0,0,1,0},{0,1,0,1,0,0},{0,0,1,0,0,0},{0,0,1,0,0,0},{0,0,1,0,0,0}});
    fontBig.insert('Z',{{1,1,1,1,1,0},{0,0,0,0,1,0},{0,0,0,1,0,0},{0,0,1,0,0,0},{0,1,0,0,0,0},{1,0,0,0,0,0},{1,1,1,1,1,0}});

    fontBig.insert('a',{{0,0,0,0,0},{0,1,1,0,0},{0,0,0,1,0},{0,1,1,1,0},{1,0,0,1,0},{1,0,0,1,0},{0,1,1,0,0}});
    fontBig.insert('b',{{1,0,0,0,0,0},{1,0,0,0,0,0},{1,1,1,0,0,0},{1,0,0,0,1,0},{1,0,0,0,1,0},{1,0,0,0,1,0},{1,0,0,0,0,0}});
    fontBig.insert('c',{{0,0,0,0,0},{0,1,1,0,0},{1,0,0,1,0},{1,0,0,0,0},{1,0,0,0,0},{1,0,0,1,0},{0,1,1,0,0}});
    fontBig.insert('d',{{0,0,0,1,0},{0,0,0,1,0},{0,1,1,1,0},{1,0,0,1,0},{1,0,0,1,0},{1,0,0,1,0},{0,1,1,0,0}});
    fontBig.insert('e',{{0,0,0,0,0},{0,1,1,0,0},{1,0,0,1,0},{1,0,0,1,0},{1,1,1,1,0},{1,0,0,0,0},{0,1,1,0,0}});
    fontBig.insert('f',{{0,1,1,0,0},{1,0,0,0,0},{1,0,0,0,0},{1,1,0,0,0},{1,0,0,0,0},{1,0,0,0,0},{1,0,0,0,0}});
    fontBig.insert('g',{{0,0,0,0,0},{0,1,1,0,0},{1,0,0,1,0},{1,0,0,1,0},{0,1,1,1,0},{0,0,0,1,0},{0,1,1,0,0}});
    fontBig.insert('h',{{1,0,0,0,0},{1,0,0,0,0},{1,1,1,0,0},{1,0,0,1,0},{1,0,0,1,0},{1,0,0,1,0},{1,0,0,1,0}});
    fontBig.insert('i',{{0,1,0,0,0},{0,0,0,0,0},{1,1,0,0,0},{0,1,0,0,0},{0,1,0,0,0},{0,1,0,0,0},{0,0,1,0,0}});
    fontBig.insert('j',{{0,0,0,1,0},{0,0,0,0,0},{0,0,1,1,0},{0,0,0,1,0},{0,0,0,1,0},{1,0,0,1,0},{0,1,1,0,0}});
    fontBig.insert('k',{{1,0,0,0,0},{1,0,0,0,0},{1,0,0,1,0},{1,0,1,0,0},{1,1,0,0,0},{1,0,1,0,0},{1,0,0,1,0}});
    fontBig.insert('l',{{1,1,0,0,0},{0,1,0,0,0},{0,1,0,0,0},{0,1,0,0,0},{0,1,0,0,0},{0,1,0,0,0},{0,0,1,0,0}});
    fontBig.insert('m',{{0,0,0,0,0,0},{0,1,0,1,0,0},{1,0,1,0,1,0},{1,0,1,0,1,0},{1,0,1,0,1,0},{1,0,1,0,1,0},{1,0,1,0,1,0}});
    fontBig.insert('n',{{0,0,0,0,0},{0,1,1,0,0},{1,0,0,1,0},{1,0,0,1,0},{1,0,0,1,0},{1,0,0,1,0},{1,0,0,1,0}});
    fontBig.insert('o',{{0,0,0,0,0},{0,1,1,0,0},{1,0,0,1,0},{1,0,0,1,0},{1,0,0,1,0},{1,0,0,1,0},{0,1,1,0,0}});
    fontBig.insert('p',{{0,0,0,0,0},{0,1,1,0,0},{1,0,0,1,0},{1,0,0,1,0},{1,1,1,0,0},{1,0,0,0,0},{1,0,0,0,0}});
    fontBig.insert('q',{{0,0,0,0,0},{0,1,1,0,0},{1,0,0,1,0},{1,0,0,1,0},{0,1,1,1,0},{0,0,0,1,0},{0,0,0,1,0}});
    fontBig.insert('r',{{0,0,0,0,0},{0,1,1,0,0},{1,0,0,0,0},{1,0,0,0,0},{1,0,0,0,0},{1,0,0,0,0},{1,0,0,0,0}});
    fontBig.insert('s',{{0,0,0,0,0},{0,1,1,0,0},{1,0,0,1,0},{0,1,0,0,0},{0,0,1,0,0},{1,0,0,1,0},{0,1,1,0,0}});
    fontBig.insert('t',{{0,0,0,0,0},{1,0,0,0,0},{1,1,1,0,0},{1,0,0,0,0},{1,0,0,0,0},{1,0,0,0,0},{0,1,1,0,0}});
    fontBig.insert('u',{{0,0,0,0,0},{1,0,0,1,0},{1,0,0,1,0},{1,0,0,1,0},{1,0,0,1,0},{1,0,0,1,0},{0,1,1,0,0}});
    fontBig.insert('v',{{0,0,0,0,0},{1,0,0,1,0},{1,0,0,1,0},{1,0,0,1,0},{1,0,0,1,0},{0,1,0,1,0},{0,0,1,0,0}});
    fontBig.insert('w',{{0,0,0,0,0},{1,0,0,0,1,0},{1,0,1,0,1,0},{1,0,1,0,1,0},{1,0,1,0,1,0},{1,0,1,0,1,0},{0,1,0,1,0,0}});
    fontBig.insert('x',{{0,0,0,0,0,0},{1,0,0,0,1,0},{0,1,0,1,0,0},{0,0,1,0,0,0},{0,0,1,0,0,0},{0,1,0,1,0,0},{1,0,0,0,1,0}});
    fontBig.insert('y',{{0,0,0,0,0},{1,0,0,1,0},{1,0,0,1,0},{1,0,0,1,0},{0,1,1,1,0},{0,0,0,1,0},{0,1,1,0,0}});
    fontBig.insert('z',{{0,0,0,0,0},{1,1,1,1,0},{0,0,0,1,0},{0,0,1,0,0},{0,1,0,0,0},{1,0,0,0,0},{1,1,1,1,0}});

    fontBig.insert('!',{{1,0},{1,0},{1,0},{1,0},{1,0},{0,0},{1,0}});
    fontBig.insert('"',{{1,0,1,0},{1,0,1,0},{0,0,0,0},{0,0,0,0},{0,0,0,0},{0,0,0,0},{0,0,0,0}});
    fontBig.insert('#',{{0,0,0,0,0,0},{0,1,0,1,0,0},{1,1,1,1,1,0},{0,1,0,1,0,0},{1,1,1,1,1,0},{0,1,0,1,0,0},{0,0,0,0,0,0}});
    fontBig.insert('\'',{{1,0},{1,0},{0,0},{0,0},{0,0},{0,0},{0,0}});
    fontBig.insert('(',{{0,1,0},{1,0,0},{1,0,0},{1,0,0},{1,0,0},{1,0,0},{0,1,0}});
    fontBig.insert(')',{{1,0,0},{0,1,0},{0,1,0},{0,1,0},{0,1,0},{0,1,0},{1,0,0}});
    fontBig.insert('*',{{0,0,1,0,0,0},{1,0,1,0,1,0},{0,1,1,1,0,0},{0,0,1,0,0,0},{0,1,1,1,0,0},{1,0,1,0,1,0},{0,0,1,0,0,0}});
    fontBig.insert('+',{{0,0,0,0},{0,1,0,0},{0,1,0,0},{1,1,1,0},{0,1,0,0},{0,1,0,0},{0,0,0,0}});
    fontBig.insert(',',{{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,1,0},{1,1,0}});
    fontBig.insert('.',{{0,0},{0,0},{0,0},{0,0},{0,0},{0,0},{1,0}});
    fontBig.insert('/',{{0,0,0,0,1,0},{0,0,0,0,1,0},{0,0,0,1,0,0},{0,0,1,0,0,0},{0,1,0,0,0,0},{1,0,0,0,0,0},{1,0,0,0,0,0}});
    fontBig.insert('\\',{{1,0,0,0,0,0},{1,0,0,0,0,0},{0,1,0,0,0,0},{0,0,1,0,0,0},{0,0,0,1,0,0},{0,0,0,0,1,0},{0,0,0,0,1,0}});
    fontBig.insert(':',{{0,0},{0,0},{0,0},{1,0},{0,0},{0,0},{1,0}});
    fontBig.insert(';',{{0,0,0},{0,0,0},{0,0,0},{0,1,0},{0,0,0},{0,1,0},{1,1,0}});
    fontBig.insert('<',{{0,0,0,1,0},{0,0,1,0,0},{0,1,0,0,0},{1,0,0,0,0},{0,1,0,0,0},{0,0,1,0,0},{0,0,0,1,0}});
    fontBig.insert('>',{{1,0,0,0,0},{0,1,0,0,0},{0,0,1,0,0},{0,0,0,1,0},{0,0,1,0,0},{0,1,0,0,0},{1,0,0,0,0}});
    fontBig.insert('?',{{0,1,1,1,0,0},{1,0,0,0,1,0},{0,0,0,0,1,0},{0,0,1,1,0,0},{0,1,0,0,0,0},{0,0,0,0,0,0},{0,1,0,0,0,0}});
    fontBig.insert('@',{{0,1,1,1,0,0},{1,0,0,0,1,0},{1,0,0,1,1,0},{1,0,1,0,1,0},{1,0,1,0,1,0},{1,0,0,1,0,0},{0,1,0,0,0,0}});
    fontBig.insert('=',{{0,0,0,0,0,0},{0,0,0,0,0,0},{1,1,1,1,1,0},{0,0,0,0,0,0},{1,1,1,1,1,0},{0,0,0,0,0,0},{0,0,0,0,0,0}});
    fontBig.insert('|',{{1,0},{1,0},{1,0},{1,0},{1,0},{1,0},{1,0}});
    fontBig.insert(']',{{1,1,1,0},{0,0,1,0},{0,0,1,0},{0,0,1,0},{0,0,1,0},{0,0,1,0},{1,1,1,0}});
    fontBig.insert('[',{{1,1,1,0},{1,0,0,0},{1,0,0,0},{1,0,0,0},{1,0,0,0},{1,0,0,0},{1,1,1,0}});
    fontBig.insert('{',{{0,1,1,0},{0,1,0,0},{0,1,0,0},{1,0,0,0},{0,0,0,0},{0,1,0,0},{0,1,1,0}});
    fontBig.insert('}',{{1,1,0,0},{0,1,0,0},{0,1,0,0},{0,0,1,0},{0,1,0,0},{0,1,0,0},{1,1,0,0}});
    //fontBig.insert('€',{{0,0,1,1,0},{0,1,0,0,1},{0,1,0,0,1},{1,1,1,1,0},{0,1,0,0,0},{0,1,0,0,1},{0,0,1,1,0}});
    //fontBig.insert('°',{{0,1,0},{1,0,1},{0,1,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0}});
    fontBig.insert(8730,{{0,0,0,0,1,0},{0,0,0,0,1,0},{0,0,0,1,0,0},{0,0,0,1,0,0},{1,0,1,0,0,0},{1,0,1,0,0,0},{0,1,0,0,0,0}});

    fontBig.insert('0',{{0,1,1,1,0,0},{1,0,0,0,1,0},{1,0,0,1,1,0},{1,0,1,0,1,0},{1,1,0,0,1,0},{1,0,0,0,1,0},{0,1,1,1,0,0}});
    fontBig.insert('1',{{0,0,1,0,0,0},{1,1,1,0,0,0},{0,0,1,0,0,0},{0,0,1,0,0,0},{0,0,1,0,0,0},{0,0,1,0,0,0},{1,1,1,1,1,0}});
    fontBig.insert('2',{{0,1,1,1,0,0},{1,0,0,0,1,0},{0,0,0,0,1,0},{0,0,0,1,0,0},{0,0,1,0,0,0},{0,1,0,0,0,0},{1,1,1,1,1,0}});
    fontBig.insert('3',{{0,1,1,1,0,0},{1,0,0,0,1,0},{0,0,0,0,1,0},{0,0,1,1,0,0},{0,0,0,0,1,0},{1,0,0,0,1,0},{0,1,1,1,0,0}});
    fontBig.insert('4',{{0,0,0,0,1,0},{0,0,0,1,1,0},{0,0,1,0,1,0},{0,1,0,0,1,0},{1,1,1,1,1,0},{0,0,0,0,1,0},{0,0,0,0,1,0}});
    fontBig.insert('5',{{1,1,1,1,1,0},{1,0,0,0,0,0},{1,0,0,0,0,0},{1,1,1,1,0,0},{0,0,0,0,1,0},{1,0,0,0,1,0},{0,1,1,1,0,0}});
    fontBig.insert('6',{{0,1,1,1,0,0},{1,0,0,0,1,0},{1,0,0,0,0,0},{1,1,1,1,0,0},{1,0,0,0,1,0},{1,0,0,0,1,0},{0,1,1,1,0,0}});
    fontBig.insert('7',{{1,1,1,1,1,0},{0,0,0,0,1,0},{0,0,0,1,0,0},{0,0,1,0,0,0},{0,1,0,0,0,0},{0,1,0,0,0,0},{0,1,0,0,0,0}});
    fontBig.insert('8',{{0,1,1,1,0,0},{1,0,0,0,1,0},{1,0,0,0,1,0},{0,1,1,1,0,0},{1,0,0,0,1,0},{1,0,0,0,1,0},{0,1,1,1,0,0}});
    fontBig.insert('9',{{0,1,1,1,0,0},{1,0,0,0,1,0},{1,0,0,0,1,0},{0,1,1,1,1,0},{0,0,0,0,1,0},{1,0,0,0,1,0},{0,1,1,1,0,0}});

}

void applicationBase::drawRectangle(uchar x1, uchar y1, uchar x2, uchar y2, ws2811_led_t color)
{
    if (x1 < WIDTH && y1 < HEIGHT && x2 < WIDTH && y2 < HEIGHT)
    {
        for (char y = y1; y <= y2; y++)
        {
            for (char x = x1; x <= x2; x++)
            {
                matrix[y * WIDTH + x] = color;
            }
        }
    }
}

void applicationBase::drawChar(int x1, int y1, QChar text, ws2811_led_t color, bool small)
{
    if (small)
    {
        if (fontSmall.contains(text))
        {
            for (char y=0;y<fontSmall.value(text).size();y++)
            {
                for (char x=0;x<fontSmall.value(text)[0].size();x++)
                {
                    if ((y+y1)>=0 && (x+x1)>=0 && (y+y1)<HEIGHT && (x+x1)<WIDTH)
                        if (fontSmall.value(text)[fontSmall.value(text).size()-1-y][x])
                            matrix[(y+y1) * WIDTH + x+x1]=color;
                }
            }
        }
    }
    else
    {
        if (fontBig.contains(text))
        {
            for (char y=0;y<fontBig.value(text).size();y++)
            {
                for (char x=0;x<fontBig.value(text)[0].size();x++)
                {
                    if ((y+y1)>=0 && (x+x1)>=0 && (y+y1)<HEIGHT && (x+x1)<WIDTH)
                        if (fontBig.value(text)[fontBig.value(text).size()-1-y][x])
                            matrix[(y+y1) * WIDTH + x+x1]=color;
                }
            }
        }
    }
}

void applicationBase::drawText(int x1, int y1, QString text, ws2811_led_t color, bool small)
{
    char x=0;
    for (uchar i=0; i<text.length(); i++)
    {
        if (small)
        {
            if (fontSmall.contains(text[i]))
            {
                drawChar(x1+x,y1,text[i],color,small);
                x+=fontSmall.value(text[i])[0].size();
            }
        }
        else
        {
            if (fontBig.contains(text[i]))
            {
                drawChar(x1+x,y1,text[i],color,small);
                x+=fontBig.value(text[i])[0].size();
            }
        }
    }
}

void applicationBase::clear()
{
    for (int x = 0; x < LED_COUNT; x++)
    {
        matrix[x]=0;
    }
}

void applicationBase::initApp()
{

}

void applicationBase::closeApp()
{

}

void applicationBase::stopShowingText()
{
    while (!scrollingText.isEmpty())
        delete scrollingText.takeFirst();
}

int applicationBase::textShowing()
{
    return scrollingText.size();
}

void applicationBase::addText(int x1, int y1, QString text, ws2811_led_t color, directionEnum direction, bool small)
{
    scrollText *textItem = new scrollText;
    textItem->x=x1;
    textItem->y=y1;
    textItem->direction=direction;
    textItem->text=text;
    textItem->color=color;
    if (small)
        textItem->height=21;
    else
        textItem->height=7;

    textItem->length=0;
    for (uchar i=0; i<text.length(); i++)
    {
        if (small)
        {
            if (fontSmall.contains(text[i]))
            {
                textItem->length+=fontSmall.value(text[i])[0].size();
            }
        }
        else
        {
            if (fontBig.contains(text[i]))
            {
                textItem->length+=fontBig.value(text[i])[0].size();
            }
        }
    }
    textItem->small=small;
    scrollingText.append(textItem);
}

void applicationBase::move()
{
    for (uchar i=0; i<scrollingText.size(); i++)
    {
        if (scrollingText[i]->direction==LEFT)
        {
            if (scrollingText[i]->x == -scrollingText[i]->length)
                scrollingText[i]->x=WIDTH;
            scrollingText[i]->x--;
        }
        if (scrollingText[i]->direction==RIGHT)
        {
            if (scrollingText[i]->x == WIDTH)
                scrollingText[i]->x=-scrollingText[i]->length;
            scrollingText[i]->x++;
        }
        drawText(scrollingText[i]->x,scrollingText[i]->y,scrollingText[i]->text,scrollingText[i]->color,scrollingText[i]->small);
    }
}



